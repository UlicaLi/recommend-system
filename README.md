# Tool Recommendation System (RecSys)

ä¸€ä¸ªç”¨äºå·¥å…·ç±»ç½‘ç«™çš„ç”Ÿäº§çº§æ¨èç³»ç»Ÿç¦»çº¿è®¡ç®—å¼•æ“ã€‚åŸºäºç”¨æˆ·çš„å†å²è¡Œä¸ºæ•°æ®ï¼Œåˆ©ç”¨ååŒè¿‡æ»¤ç®—æ³•ç”Ÿæˆä¸ªæ€§åŒ–æ¨èï¼Œå¹¶å°†ç»“æœå­˜å‚¨è‡³ Redis ä¾›åœ¨çº¿ä¸šåŠ¡å®æ—¶è°ƒç”¨ã€‚

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½

ç³»ç»Ÿé€šè¿‡ç¦»çº¿æ‰¹å¤„ç†ä»»åŠ¡ï¼ˆBatch Jobï¼‰æä¾›ä»¥ä¸‹ä¸‰ç§ç»´åº¦çš„æ¨èèƒ½åŠ›ï¼š

1.  **å¸¸ç”¨å·¥å…· (Recent History)**
    *   **åœºæ™¯**: é¦–é¡µ "æœ€è¿‘ä½¿ç”¨" / "å¸¸è®¿é—®"ã€‚
    *   **é€»è¾‘**: åŸºäºç”¨æˆ·å†å²è®¿é—®è®°å½•ï¼Œé‡‡ç”¨ **æ—¶é—´è¡°å‡ (Time Decay)** ç®—æ³•è®¡ç®—æƒé‡ã€‚è·ç¦»ç°åœ¨è¶Šè¿‘çš„è®¿é—®æƒé‡è¶Šé«˜ ($Score = \sum 0.95^{\Delta days}$)ï¼Œç²¾å‡†æ•æ‰ç”¨æˆ·çŸ­æœŸå…´è¶£ã€‚
    *   **ç‰¹ç‚¹**: å†…å­˜å­—å…¸ç´¢å¼•åŠ é€Ÿï¼ŒæŸ¥è¯¢æ€§èƒ½ O(1)ã€‚

2.  **çŒœä½ å–œæ¬¢ (Discovery)**
    *   **åœºæ™¯**: é¦–é¡µ "ä¸ºæ‚¨æ¨è" / ä¾§è¾¹æ ã€‚
    *   **é€»è¾‘**: ä½¿ç”¨ **ALS (Alternating Least Squares)** éšå› å­æ¨¡å‹ã€‚é€šè¿‡çŸ©é˜µåˆ†è§£æŒ–æ˜ç”¨æˆ·å’Œå·¥å…·çš„æ½œåœ¨ç‰¹å¾å‘é‡ï¼Œé¢„æµ‹ç”¨æˆ·å¯èƒ½æ„Ÿå…´è¶£ä½†ä»æœªäº¤äº’è¿‡çš„å·¥å…·ã€‚
    *   **ç‰¹ç‚¹**: è‡ªåŠ¨è¿‡æ»¤ç”¨æˆ·å·²ä½¿ç”¨è¿‡çš„å·¥å…·ï¼Œä¿è¯æ¨èçš„æ–°é¢–æ€§ã€‚

3.  **ç›¸å…³æ¨è (Item-to-Item)**
    *   **åœºæ™¯**: å·¥å…·è¯¦æƒ…é¡µ "çœ‹äº†è¿™ä¸ªçš„äººä¹Ÿçœ‹äº†..."ã€‚
    *   **é€»è¾‘**: åŸºäº ALS æ¨¡å‹ç”Ÿæˆçš„ç‰©å“éšå‘é‡ï¼Œè®¡ç®— **ä½™å¼¦ç›¸ä¼¼åº¦ (Cosine Similarity)**ï¼Œæ‰¾å‡ºè¯­ä¹‰ä¸Šæœ€ç›¸ä¼¼çš„å·¥å…·é›†åˆã€‚

## ğŸ›  æŠ€æœ¯æ¶æ„

*   **è¯­è¨€**: Python 3.10+
*   **ç®—æ³•æ ¸å¿ƒ**: [implicit](https://github.com/benfred/implicit) (é«˜æ€§èƒ½ ALS å®ç°)
*   **æ•°æ®å·¥ç¨‹**: Pandas (çŸ¢é‡åŒ– ETL), Scipy (Sparse Matrix)
*   **æ•°æ®å­˜å‚¨**:
    *   **Source**: MySQL (é€šè¿‡ SQLAlchemy è¯»å–)
    *   **Sink**: Redis (Pipeline æ‰¹é‡å†™å…¥)

## ğŸ“‚ ç›®å½•ç»“æ„

```text
.
â”œâ”€â”€ config/
â”‚   â””â”€â”€ settings.py    # ç»Ÿä¸€é…ç½®ä¸­å¿ƒ (æ•°æ®åº“ã€Redisã€ç®—æ³•è¶…å‚æ•°ã€ä¸šåŠ¡è§„åˆ™)
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ dataloader.py  # æ•°æ®åŠ è½½å™¨ï¼šæ‰§è¡Œ SQLã€æ—¶é—´è¡°å‡è®¡ç®—ã€æ„å»º CSR ç¨€ç–çŸ©é˜µ
â”‚   â””â”€â”€ engine.py      # æ¨èå¼•æ“ï¼šå°è£… ALS æ¨¡å‹è®­ç»ƒã€User/Item å‘é‡æ£€ç´¢ä¸æ¨ç†
â”œâ”€â”€ main.py            # ç¨‹åºå…¥å£ï¼šç¼–æ’ ETL -> Train -> Predict -> Store å…¨æµç¨‹
â”œâ”€â”€ pyproject.toml     # é¡¹ç›®ä¾èµ–å®šä¹‰
â””â”€â”€ logs/              # è¿è¡Œæ—¥å¿—
```

## âš™ï¸ é…ç½®ä¸è¿è¡Œ

### 1. å®‰è£…ä¾èµ–

æœ¬é¡¹ç›®ä½¿ç”¨ `uv` æˆ–æ ‡å‡†çš„ `pip` è¿›è¡ŒåŒ…ç®¡ç†ã€‚

```bash
# ä½¿ç”¨ pip
pip install .

# æˆ–ç›´æ¥å®‰è£…ä¾èµ–
pip install sqlalchemy pandas implicit scipy pymysql redis python-dotenv tqdm
```

### 2. ç¯å¢ƒå˜é‡é…ç½®

ç³»ç»Ÿä¼˜å…ˆè¯»å–ç¯å¢ƒå˜é‡ã€‚ä½ å¯ä»¥åœ¨è¿è¡Œå‰ export å˜é‡ï¼Œæˆ–è€…ä¿®æ”¹ `config/settings.py` çš„é»˜è®¤å€¼ã€‚

| å˜é‡å | æè¿° | ç¤ºä¾‹ |
| :--- | :--- | :--- |
| `DB_URL` | MySQL è¿æ¥å­—ç¬¦ä¸² | `mysql+pymysql://user:pass@localhost:3306/db` |
| `REDIS_URL` | Redis è¿æ¥å­—ç¬¦ä¸² | `redis://localhost:6379/0` |

### 3. è¿è¡Œç¦»çº¿ä»»åŠ¡

```bash
python main.py
```

### 4. å­˜å‚¨ç»“æœæ ¼å¼ (Redis)

ä»»åŠ¡è¿è¡ŒæˆåŠŸåï¼Œæ•°æ®å°†ä»¥ `List` ç»“æ„å­˜å…¥ Redisï¼ŒTTL é»˜è®¤ä¸º 24 å°æ—¶ï¼š

*   **ç”¨æˆ·-å†å²**: `rec:sys:user:{user_id}:history` (value: `[item_id_1, item_id_2, ...]`)
*   **ç”¨æˆ·-å‘ç°**: `rec:sys:user:{user_id}:discovery`
*   **ç‰©å“-ç›¸å…³**: `rec:sys:item:{item_id}:related`

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

*   **æŸ¥è¯¢ä¼˜åŒ–**: ä½¿ç”¨ Hash Map æ›¿ä»£ DataFrame è¿‡æ»¤ï¼Œå®ç° O(1) çš„ç”¨æˆ·å†å²æŸ¥è¯¢ã€‚
*   **æ‰¹é‡å†™å…¥**: ä½¿ç”¨ Redis Pipeline æŠ€æœ¯ï¼Œå¤§å¹…é™ä½ç½‘ç»œ RTTï¼Œæå‡å¤§è§„æ¨¡æ•°æ®è½åº“é€Ÿåº¦ã€‚
